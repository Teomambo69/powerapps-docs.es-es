---
title: Sincronización de datos (Common Data Service) | Microsoft Docs
description: <Description>
ms.custom: ''
ms.date: 10/31/2018
ms.reviewer: pehecke
ms.service: powerapps
ms.topic: article
author: JimDaly
ms.author: jdaly
manager: ryjones
search.audienceType:
- developer
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 1719b8150605b773c201da76f68567cfdf664588
ms.sourcegitcommit: f4cf849070628cf7eeaed6b4d4f08c20dcd02e58
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/21/2020
ms.locfileid: "3156280"
---
# <a name="data-synchronization"></a>Sincronización de datos

Algunas veces necesitará sincronizar e integrar datos de Common Data Service con los datos que se almacenan en otros sistemas. Los patrones de integración de datos comunes incluyen tomar datos de un sistema externo e insertarlos en Common Data Service, tomar datos de Common Data Service y sincronizarlos con algún almacén de datos externos o actualizar Common Data Service con datos externos. Puede utilizar varias nuevas funciones para facilitar la escritura de código para conseguir estos escenarios.  

 Estas nuevas características se puede usar por separado según sea necesario en cualquier situación, pero juntas abordan problemas comunes relacionados con sincronización y la integración de datos con datos externos. La siguiente tabla presenta estas características nuevas.  


|            Característica de             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Quitar mensajes especializados |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       Common Data Service tiene varios mensajes especializados para operaciones específicas que actualizan registros. Estos mensajes están obsoletos en esta versión y ahora debe utilizar simplemente `Update` para realizar las mismas operaciones. Los mensajes obsoletos son:<br /><br /> -   Asignar<br />-   SetParentSystemUser<br />-   SetParentTeam<br />-   SetParentBusinessUnit<br />-   SetBusinessEquipment<br />-   SetBusinessUnit<br />-   SetState<br /><br /> Actualizar simplemente el registro es mucho más sencillo que usar estos mensajes y debe simplificar el desarrollo para escenarios de integración y de sincronización de datos. Más información: [Realizar operaciones especializadas con Actualizar](/dynamics365/customer-engagement/developer/org-service/perform-specialized-operations-using-update)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|        Claves alternativas         | En las implementaciones de empresa de Common Data Service es frecuente que los datos de sistemas externos de empresa se carguen en Common Data Service de modo que puedan presentarse a los usuarios. Estos sistemas externos a menudo no se pueden extender para almacenar los identificadores de registro de Common Data Service, denominados GUID, necesarios para la sincronización del sistema. Una solución común es agregar un atributo personalizado a una entidad en Common Data Service que puede usarse para almacenar el identificador del registro relacionado en el sistema externo.<br /><br /> Al crear procesos de carga de datos que actualizan registros en Common Data Service y asignan referencias a registros relacionados en Common Data Service, primero tiene que realizar una llamada adicional del servicio web de Common Data Service para recuperar el registro Common Data Service de destino basado en este identificador externo. Esta consulta puede ser lenta si un índice adecuado no está instalado para el atributo personalizado y en escenarios de Common Data Service, cada una de estas consultas requiere un costoso viaje de ida y vuelta a través de Internet. Estos viajes de ida y vuelta adicionales pueden aumentar en un orden de magnitud el tiempo que se tarda en actualizar cada registro de Common Data Service y pueden reducir el rendimiento general drásticamente.<br /><br /> Ahora, las operaciones de servicio web pueden tener como objetivo un registro de Common Data Service mediante una o varias claves alternativas en lugar de un GUID. Además, las referencias de entidad a registros relacionados se pueden especificar con una o varias claves alternativas. Puesto que las claves alternativas se indizan, las operaciones de consulta muestran un mayor rendimiento en comparación con agregar un atributo personalizado como identificador. Si algo va mal, el sistema lanzará un error y revertirá todos los cambios. Más información: [Definir claves alternativas para una entidad](define-alternate-keys-entity.md) |
|        Seguimiento de cambios        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         Cuando las organizaciones necesitan mantener datos de Common Data Service en un almacén externo, ahora hay un modo de mantener esos datos sincronizados de forma permanente detectando qué datos se han modificado desde que los datos se extrajeron inicialmente o se sincronizaron por última vez. El mensaje <xref:Microsoft.Xrm.Sdk.Messages.RetrieveEntityChangesRequest> se usa para recuperar los cambios de una entidad. Para obtener más información, consulte [Uso del seguimiento de cambios para sincronizar los datos con sistemas externos](use-change-tracking-synchronize-data-external-systems.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|            Upsert             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 Al cargar datos en Common Data Service desde un sistema externo, es posible que no sepa si ya existe un registro en Common Data Service y se debe actualizar, o si debe crear un nuevo registro. Use el nuevo mensaje <xref:Microsoft.Xrm.Sdk.Messages.UpsertRequest> para actualizar el registro si existe o crear un nuevo registro si no existe, en una llamada de API. Más información: [Actualizar Dynamics 365 con datos externos usando Upsert](use-upsert-insert-update-record.md)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

 La siguiente tabla compara la complejidad de la sincronización con y sin estas características nuevas.  


|                                                       Antes                                                        |                                                                                                                                                                                                                                                                                                                     Descripción                                                                                                                                                                                                                                                                                                                      |
|---------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ![Actualizar el uso de mensajes especializados](media/before-carina-dynamics-crm-2015.png "Actualizar el uso de mensajes especializados") | Para cada registro:<br /><br /> 1.  Consulte Common Data Service para ver si existe la cuenta. Si existe, obtenga su Id. de cuenta (por ejemplo, ABC123).<br />2.  Consulte los contactos para comprobar que el contacto existe. Si existe, obtenga el Id. de correo electrónico del contacto (por ejemplo: contact@company.com).<br />3.  Consulte para obtener o establecer el Id. del área (por ejemplo, NW).<br />4.  Consulte para obtener el Id. de usuario para establecer el propietario (por ejemplo: user@mycompany.com)<br />5.  Actualice la cuenta.<br />6.  Establecer el estado de la cuenta llamando a `SetState` API.<br />7.  Asigne el propietario llamando a `Assign` API. |

 Ahora, con las nuevas características, solo necesita una llamada al servidor para realizar las mismas operaciones mostradas anteriormente.  


|                                                Después                                                 |                                                                                                   Descripción                                                                                                   |
|------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ![Actualizar usando UpdateRequest](media/after-carina-dynamics-crm-2015.png "Actualizar usando UpdateRequest") | Sólo una llamada para comprobar si hay una cuenta con el identificador único ABC123, establecer el contacto principal a contact@company.com, establecer la región en NW, establecer el propietario en user@mycompany.com y el estado como activo. |

## <a name="in-this-section"></a>En esta sección  
 [Defina claves alternativas para una entidad](define-alternate-keys-entity.md)<br />
 [Uso de claves alternativas](use-alternate-key-create-record.md)<br />
 [Uso del seguimiento de cambios para sincronizar los datos con sistemas externos](use-change-tracking-synchronize-data-external-systems.md)<br />
 [Actualizar Dynamics 365 con datos externos usando Upsert](use-upsert-insert-update-record.md)<br />
 [Ejemplo: Insertar o actualizar un registro mediante Upsert](/dynamics365/customer-engagement/developer/sample-insert-update-record-upsert)<br />
 [Ejemplo: Sincronizar datos con sistemas externos utilizando seguimiento de cambios](/dynamics365/customer-engagement/developer/sample-synchronize-data-external-systems-using-change-tracking)<br /> 

## <a name="related-sections"></a>Secciones relacionadas  
 [Realizar operaciones especializadas con Actualizar](/dynamics365/customer-engagement/developer/org-service/perform-specialized-operations-using-update)<br /> 
 [Guía para programadores para la personalización de Dynamics 365](/dynamics365/customer-engagement/developer/customize-dev/customize-applications)<br /> 