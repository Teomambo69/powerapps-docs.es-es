---
title: Configuración del proveedor de OpenID Connect para un portal | MicrosoftDocs
description: Instrucciones para agregar y configurar la configuración del proveedor de OpenID Connect para un portal.
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 10/18/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 0dba1794f15a710e43feaec3ca6d4d2dbc9c5fc3
ms.sourcegitcommit: 57b968b542fc43737330596d840d938f566e582a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/22/2019
ms.locfileid: "72978494"
---
# <a name="configure-open-id-connect-provider-settings-for-portals"></a>Configuración del proveedor de Open ID Connect para portales

Los proveedores de identidades externas de [OpenID Connect](http://openid.net/connect/) son servicios que cumplen con las [Especificaciones](http://openid.net/developers/specs/)de Open ID Connect. La integración de un proveedor implica la búsqueda de la dirección URL de autoridad (o emisor) asociada al proveedor. Una dirección URL de configuración se puede determinar a partir de la autoridad que proporciona los metadatos necesarios durante el flujo de trabajo de autenticación. La configuración del proveedor se basa en las propiedades de la clase [OpenIdConnectAuthenticationOptions](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.aspx) .

Ejemplos de direcciones URL de entidad:

- [Google](https://developers.google.com/identity/protocols/OpenIDConnect): <https://accounts.google.com/><https://accounts.google.com/.well-known/openid-configuration>
- [[!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]](https://msdn.microsoft.com/library/azure/mt168838.aspx): [https://login.microsoftonline.com/&lt ;[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]&gt; de aplicación de ad/](https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration)

Cada proveedor de OpenID Connect también implica registrar una aplicación (similar a la de un proveedor OAuth 2,0) y obtener un identificador de cliente. La dirección URL de la autoridad y el ID. de cliente de la aplicación generada son los valores necesarios para habilitar la autenticación externa entre el portal y el proveedor de identidades.

> [!Note]
> El punto de conexión de OpenID Connect de Google no se admite actualmente porque las bibliotecas subyacentes todavía están en las primeras fases del lanzamiento con problemas de compatibilidad que resolver. En su lugar, se puede usar la [configuración del proveedor de OAuth2 para el extremo de portales](configure-oauth2-settings.md) .

## <a name="openid-settings-for-includepn-azure-active-directoryincludespn-azure-active-directorymd"></a>Configuración de OpenID para [!INCLUDE[pn-azure-active-directory](../../../includes/pn-azure-active-directory.md)]

Para empezar, inicie sesión en el [portal de administración de[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]](https://msdn.microsoft.com/library/azure/hh967611.aspx#bkmk_azureportal) y cree o seleccione un directorio existente. Cuando un directorio esté disponible, siga las instrucciones para [Agregar una aplicación](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications) al directorio.  

1. En el menú **aplicaciones** del directorio, seleccione **Agregar**.
2. Elija **Agregar una aplicación que mi organización está desarrollando**.
3. Especifique un **nombre** personalizado para la aplicación y elija la **aplicación Web de tipo y/o la API Web**.
4. Para la **dirección URL de inicio de sesión** y el **URI de ID. de aplicación**, especifique la dirección URL del portal para ambos campos https://portal.contoso.com/
5. En este momento, se crea una nueva aplicación. Vaya a la sección **configurar** en el menú.

    En la sección **Inicio de sesión único** , actualice la primera entrada de **dirección URL de respuesta** para incluir una ruta de acceso en la dirección URL: http://portal.contoso.com/signin-azure-ad. Esto corresponde al valor de configuración del sitio de **RedirectUri**

6. En la sección **propiedades** , busque el campo ID. de **cliente** . Esto corresponde al valor de configuración del sitio de **ClientID** .
7. En el menú de pie de página, seleccione **Ver extremos** y anote el campo de **documento de metadatos de Federación** .

La parte izquierda de la dirección URL es el valor de **autoridad** y está en uno de los siguientes formatos:

- https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/
- https://login.microsoftonline.com/contoso.onmicrosoft.com/

Para obtener la dirección URL de configuración del servicio, reemplace la cola de la ruta de acceso de FederationMetadata/2007-06/FederationMetadata. XML por la ruta de acceso. Well-Known/OpenID-Configuration. Por ejemplo, <https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration>

Esto corresponde al valor de configuración del sitio de **MetadataAddress** .

### <a name="related-site-settings"></a>Configuración del sitio relacionado

Aplique la configuración del sitio del portal que hace referencia a la aplicación anterior.

> [!Note]
> Una configuración de [!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)] estándar de AD solo usa la configuración siguiente (con valores de ejemplo):                                 
> - Autenticación/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/Authority-<https://login.microsoftonline.com/01234567-89ab-cdef-0123-456789abcdef/>                                                    
> - Autenticación/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/ClientId-fedcba98-7654-3210-FEDC-ba9876543210                                      
>   El ID. de cliente y la dirección URL de la entidad no contienen el mismo valor y deben recuperarse por separado.           
> - Autenticación/OpenIdConnect/[!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD/RedirectUri- https://portal.contoso.com/signin-azure-ad
 
Varios proveedores de identidades se pueden configurar sustituyendo una etiqueta por la etiqueta de\] del proveedor de \[. Cada etiqueta única forma un grupo de valores de configuración relacionados con un proveedor de identidades. Ejemplos: [!INCLUDE[pn-azure-shortest](../../../includes/pn-azure-shortest.md)]AD, MyIdP


|                          Nombre de la configuración del sitio                           |                                                                                                                                                                                                         Descripción                                                                                                                                                                                                          |
|----------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|           Autenticación/registro/ExternalLoginEnabled           |                                                                                                                                                                         Habilita o deshabilita el registro y el inicio de sesión de la cuenta externa. Valor predeterminado: true                                                                                                                                                                         |
|         Proveedor de autenticación/OpenIdConnect/\[\]/Authority          |                                               Obligatorio. La autoridad que se va a usar al realizar llamadas a OpenIdConnect. Ejemplo: `https://login.microsoftonline.com/contoso.onmicrosoft.com/`. Para obtener más información:[OpenIdConnectAuthenticationOptions. Authority](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.authority.aspx).                                                |
|      Proveedor de autenticación/OpenIdConnect/\[\]/MetadataAddress       | Extremo de detección para obtener metadatos. Normalmente, finaliza con la ruta de acceso:/. Well-Known/OpenID-Configuration. Ejemplo: `https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration`. Para obtener más información:[OpenIdConnectAuthenticationOptions. MetadataAddress](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.metadataaddress.aspx). |
|     Proveedor de autenticación/OpenIdConnect/\[\]/AuthenticationType     |                                   Tipo de middleware de autenticación OWIN. Especifique el valor del emisor en los metadatos de configuración del servicio. Ejemplo: `https://sts.windows.net/contoso.onmicrosoft.com/`. Para obtener más información: [AuthenticationOptions. AuthenticationType](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationtype.aspx).                                   |
|          Proveedor de autenticación/OpenIdConnect/\[\]/ClientId          |                                                  Obligatorio. Valor de ID. de cliente de la aplicación de proveedor. También puede denominarse "ID. de aplicación" o "clave de consumidor". Para obtener más información: [OpenIdConnectAuthenticationOptions. ClientID](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientid.aspx).                                                   |
|        Proveedor de autenticación/OpenIdConnect/\[\]/ClientSecret        |                                              Valor de secreto de cliente de la aplicación de proveedor. También puede denominarse "secreto de aplicación" o "secreto de consumidor". Para obtener más información: [OpenIdConnectAuthenticationOptions. ClientSecret](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.clientsecret.aspx).                                              |
|        Proveedor de autenticación/OpenIdConnect/\[\]/RedirectUri         |                                                        Recomendar. El punto de conexión pasivo de AD FS WS-Federation. Ejemplo: https://portal.contoso.com/signin-saml2. Para obtener más información: [OpenIdConnectAuthenticationOptions. RedirectUri](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.redirecturi.aspx).                                                        |
|          Proveedor de autenticación/OpenIdConnect/\[\]/Caption           |                                                              Recomendar. Texto que el usuario puede mostrar en una interfaz de usuario de inicio de sesión. Valor predeterminado: proveedor de \[\]. Para obtener más información: [OpenIdConnectAuthenticationOptions. Caption](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.caption.aspx).                                                               |
|          Proveedor de autenticación/OpenIdConnect/\[\]/Resource          |                                                                                                       ' Resource '. Para obtener más información: [OpenIdConnectAuthenticationOptions. Resource](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.resource.aspx).                                                                                                        |
|        Proveedor de autenticación/OpenIdConnect/\[\]/ResponseType        |                                                                                                ' Response\_type '. Para obtener más información: [OpenIdConnectAuthenticationOptions. ResponseType](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.responsetype.aspx).                                                                                                 |
|           Proveedor de autenticación/OpenIdConnect/\[\]/Scope            |                                                                                Lista separada por espacios de los permisos que se van a solicitar. Valor predeterminado: OpenID. Para obtener más información: [OpenIdConnectAuthenticationOptions. Scope ](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.scope.aspx).                                                                                 |
|        Proveedor de autenticación/OpenIdConnect/\[\]/CallbackPath        |                      Una ruta de acceso restringida opcional en la que se va a procesar la devolución de llamada de autenticación. Si no se proporciona y RedirectUri está disponible, este valor se generará a partir de RedirectUri. Para obtener más información: [OpenIdConnectAuthenticationOptions. CallbackPath](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.callbackpath.aspx).                      |
|     Proveedor de autenticación/OpenIdConnect/\[\]/BackchannelTimeout     |                                                                Valor de tiempo de espera para las comunicaciones de canal posterior. Ejemplo: 00:05:00 (5 minutos). Para obtener más información: [OpenIdConnectAuthenticationOptions. BackchannelTimeout](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.backchanneltimeout.aspx).                                                                |
| Proveedor de autenticación/OpenIdConnect/\[\]/RefreshOnIssuerKeyNotFound |                                      Determina si se debe intentar una actualización de metadatos después de un SecurityTokenSignatureKeyNotFoundException. Para obtener más información: [OpenIdConnectAuthenticationOptions. RefreshOnIssuerKeyNotFound](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.refreshonissuerkeynotfound.aspx).                                       |
|      Proveedor de autenticación/OpenIdConnect/\[\]/UseTokenLifetime      |                                               Indica que la duración de la sesión de autenticación (por ejemplo, cookies) debe coincidir con la del token de autenticación. Para obtener más información: [OpenIdConnectAuthenticationOptions. UseTokenLifetime](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.usetokenlifetime.aspx).                                               |
|     Proveedor de autenticación/OpenIdConnect/\[\]/AuthenticationMode     |                                                                                                     El modo de middleware de autenticación OWIN. Para obtener más información: [AuthenticationOptions. AuthenticationMode](https://msdn.microsoft.com/library/microsoft.owin.security.authenticationoptions.authenticationmode.aspx).                                                                                                     |
| Proveedor de autenticación/OpenIdConnect/\[\]/SignInAsAuthenticationType |                                                   AuthenticationType que se usa al crear System. Security. Claims. ClaimsIdentity. Para obtener más información: [OpenIdConnectAuthenticationOptions. SignInAsAuthenticationType](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.signinasauthenticationtype.aspx).                                                   |
|   Proveedor de autenticación/OpenIdConnect/\[\]/PostLogoutRedirectUri    |                                                                                 ' Post\_Logout\_redirigir\_URI '. Para obtener más información: [OpenIdConnectAuthenticationOptions. PostLogoutRedirectUri](https://msdn.microsoft.com/library/microsoft.owin.security.openidconnect.openidconnectauthenticationoptions.postlogoutredirecturi.aspx).                                                                                 |
|       Proveedor de autenticación/OpenIdConnect/\[\]/ValidAudiences       |                                                                                                  Lista de direcciones URL de audiencia separadas por comas. Para obtener más información: [TokenValidationParameters. AllowedAudiences](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.allowedaudiences.aspx).                                                                                                  |
|        Proveedor de autenticación/OpenIdConnect/\[\]/ValidIssuers        |                                                                                                       Lista separada por comas de las direcciones URL del emisor. Para obtener más información: [TokenValidationParameters. ValidIssuers](https://msdn.microsoft.com/library/system.identitymodel.tokens.tokenvalidationparameters.validissuers.aspx).                                                                                                       |
|         Proveedor de autenticación/OpenIdConnect/\[\]/ClockSkew          |                                                                                                                                                                                        El sesgo de reloj que se aplica al validar los tiempos.                                                                                                                                                                                        |
|       Proveedor de autenticación/OpenIdConnect/\[\]/NameClaimType        |                                                                                                                                                                              El tipo de demanda que usa ClaimsIdentity para almacenar la demanda de nombre.                                                                                                                                                                              |
|       Proveedor de autenticación/OpenIdConnect/\[\]/RoleClaimType        |                                                                                                                                                                              El tipo de demanda que usa ClaimsIdentity para almacenar la demanda de rol.                                                                                                                                                                              |
|   Proveedor de autenticación/OpenIdConnect/\[\]/RequireExpirationTime    |                                                                                                                                                                              Valor que indica si los tokens deben tener un valor de ' expiración '.                                                                                                                                                                              |
|    Proveedor de autenticación/OpenIdConnect/\[\]/RequireSignedTokens     |                                                                                                                               Un valor que indica si un System. IdentityModel. tokens. SecurityToken xmlns =<http://ddue.schemas.microsoft.com/authoring/2003/5> puede ser válido si no está firmado.                                                                                                                                |
|      Proveedor de autenticación/OpenIdConnect/\[\]/SaveSigninToken       |                                                                                                                                                                        Valor booleano que se va a controlar si el token original se guarda cuando se crea una sesión.                                                                                                                                                                        |
|       Proveedor de autenticación/OpenIdConnect/\[\]/ValidateActor        |                                                                                                                                                            Un valor que indica si se debe validar System. IdentityModel. tokens. JwtSecurityToken. actor.                                                                                                                                                            |
|      Proveedor de autenticación/OpenIdConnect/\[\]/ValidateAudience      |                                                                                                                                                                       Valor booleano que se va a utilizar para controlar si la audiencia se valida durante la validación de tokens.                                                                                                                                                                        |
|       Proveedor de autenticación/OpenIdConnect/\[\]/ValidateIssuer       |                                                                                                                                                                        Valor booleano que se va a utilizar para controlar si el emisor se validará durante la validación del token.                                                                                                                                                                         |
|      Proveedor de autenticación/OpenIdConnect/\[\]/ValidateLifetime      |                                                                                                                                                                       Valor booleano que se va a utilizar para controlar si se validará la duración durante la validación de tokens.                                                                                                                                                                        |
|  Proveedor de autenticación/OpenIdConnect/\[\]/ValidateIssuerSigningKey  |                                                                                                                  Valor booleano que controla si se llama a la validación de System. IdentityModel. tokens. SecurityKey que firmó el securityToken xmlns =<http://ddue.schemas.microsoft.com/authoring/2003/5>.                                                                                                                  |
|                                                                      |                                                                                                                                                                                                                                                                                                                                                                                                                              |

## <a name="enable-authentication-using-a-multi-tenant-azure-active-directory-application"></a>Habilitación de la autenticación mediante una aplicación Azure Active Directory multiinquilino

Puede configurar el portal para que acepte [!include[](../../../includes/pn-azure-active-directory.md)] usuarios de cualquier inquilino en [!include[](../../../includes/pn-azure-shortest.md)] y no solo un inquilino específico mediante el uso de la aplicación multiinquilino registrada en [!include[](../../../includes/pn-azure-active-directory.md)]. Para habilitar la multiinquilino, establezca el conmutador **multiinquilino** en **sí** en la aplicación [!include[](../../../includes/pn-azure-active-directory.md)].

![Habilitación de varios inquilinos en Azure Active Directory aplicación](../media/enable-multi-tenancy.png "Habilitación de varios inquilinos en Azure Active Directory aplicación")

### <a name="related-site-settings"></a>Configuración del sitio relacionado

Varios proveedores de identidades se pueden configurar sustituyendo una etiqueta por la etiqueta [Provider]. Cada etiqueta única forma un grupo de valores de configuración relacionados con un proveedor de identidades. Puede crear o configurar los siguientes valores del sitio en portales para admitir la autenticación en [!include[](../../../includes/pn-azure-active-directory.md)] mediante una aplicación multiinquilino:

|Nombre de la configuración del sitio    |Descripción   |
|---|---|
|Authentication/OpenIdConnect/[Provider]/Authority   |La autoridad que se va a usar al realizar llamadas a OpenIdConnect. Por ejemplo: `https://login.microsoftonline.com/common`   |
|Authentication/OpenIdConnect/[Provider]/ClientId   |Valor de ID. de cliente de la aplicación de proveedor. También se le puede denominar identificador de aplicación o clave de consumidor.   |
|Authentication/OpenIdConnect/[Provider]/ExternalLogoutEnabled   |Habilita o deshabilita el registro y el cierre de sesión de la cuenta externa. Establezca este valor como true.   |
|Authentication/OpenIdConnect/[Provider]/IssuerFilter   |Un filtro basado en caracteres comodín que coincide en todos los emisores en todos los inquilinos. En la mayoría de los casos, use el valor: `https://sts.windows.net/*/`   |
|Authentication/OpenIdConnect/[Provider]/RedirectUri  |La ubicación de la dirección URL de respuesta en la que el proveedor envía la respuesta de autenticación. Por ejemplo: `https://portal.contoso.com/signin-oidc` |
|Authentication/OpenIdConnect/[Provider]/ValidateIssuer   |Valor booleano que se va a utilizar para controlar si el emisor se validará durante la validación del token. Establezca este valor en false.   |
|||

### <a name="see-also"></a>Vea también
[Configurar la autenticación del portal](configure-portal-authentication.md)  
[Establecimiento de la identidad de autenticación para un portal](set-authentication-identity.md)  
[Configuración del proveedor de OAuth2 para portales](configure-oauth2-settings.md)  
[Configuración del proveedor de WS-Federation para portales](configure-ws-federation-settings.md)  
[Configuración del proveedor de SAML 2,0 para portales](configure-saml2-settings.md)  

